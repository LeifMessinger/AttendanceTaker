{% extends "layout.html" %}

{% block left_content %}
	<!-- This is where the absent people go, if classList was defined -->
{% endblock %}

{% block middle_content %}
	<p style="font-size: 10vh; margin-left: auto; margin-right: auto;">Scan me!</p>
	<!-- Maybe use htmx to swap the image. Use {bruh% url 'AttendanceTaker.QR' } as the image source' -->
	<style>
		#qrcode{
			width: 70%;
			margin: auto;
		}
		#qrcode>img{
			width: 100%;

			image-rendering: pixelated;
			image-rendering: -moz-crisp-edges;
			image-rendering: crisp-edges;
		}
	</style>

	<div id="qrcode"></div>
	<p style="margin-left: auto; margin-right: auto;">This webapp requires cookies to work.</p>

	{% load static %}
	<script src="{% static 'AttendanceTaker/qrcodejs/qrcode.min.js' %}" type="text/javascript"></script>
	<script type="text/javascript">
		const qrcode = new QRCode("qrcode", {
			//text: "bruh",
			width: 100,
			height: 100,
			colorDark : "#000000",
			colorLight : "#ffffff",
			correctLevel : QRCode.CorrectLevel.H,
		});

		setInterval(()=>{
			fetch("{% url 'ClassroomQRCode' %}").then((res)=>res.json()).then((data)=>data["data"]).then((base64String)=>{
				qrcode.makeCode(document.location.origin + "/" + base64String);
				//console.log(base64String);
			});
		}, 1000);	//This QR code can be behind by a second, but that isn't too bad.
	</script>
{% endblock %}

{% block right_content %}
	<!-- This is where the present people go -->
	<!-- Make Copy JSON button that queries the server for the present list and puts it in the clipboard -->
	<!-- Make live attendance with htmx that updates every second. It can just render a template that loops through the students. -->
{% endblock %}
